<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>디맨드 근무 후기 이벤트</title>
  <link href="https://cdn.jsdelivr.net/npm/pretendard@1.3.6/dist/web/static/pretendard.css" rel="stylesheet">
  <style>
    body {
      font-family: 'Pretendard', sans-serif;
      background: #f7f9fc;
      padding: 3rem 1rem;
      margin: 0;
    }
    .container {
      max-width: 720px;
      margin: auto;
      background: #ffffff;
      padding: 2rem 1.5rem;
      border-radius: 16px;
      box-shadow: 0 6px 20px rgba(0,0,0,0.06);
    }
    h1 {
      text-align: center;
      font-size: 1.8rem;
      font-weight: 600;
      margin-bottom: 1rem;
      color: #222;
    }
    .step-indicator {
      text-align: center;
      font-weight: 500;
      color: #888;
      margin-bottom: 2rem;
      font-size: 1rem;
    }
    .progress-wrapper {
      background: #e0e4ea;
      height: 8px;
      border-radius: 4px;
      overflow: hidden;
      margin: 0 auto 2rem;
      width: 100%;
      max-width: 600px;
    }
    .progress-bar {
      height: 100%;
      background-color: #0054FF;
      width: 0%;
      transition: width 0.5s ease;
    }
    label {
      font-weight: 500;
      font-size: 1rem;
      display: block;
      margin-top: 1.5rem;
      margin-bottom: 0.4rem;
      color: #333;
    }
    .label-subtext {
      font-size: 0.9rem;
      color: #999;
      margin-top: 0.3rem;
      margin-bottom: 0.6rem;
    }
    input[type="text"],
    input[type="email"],
    input[type="tel"],
    select,
    textarea {
      width: 100%;
      max-width: 560px;
      padding: 0.75rem;
      border-radius: 10px;
      border: 1px solid #d0d7de;
      font-size: 1rem;
      background-color: #fff;
      transition: border 0.2s, box-shadow 0.2s;
      font-weight: 500;
      box-sizing: border-box;
    }
    input:focus,
    select:focus,
    textarea:focus {
      border-color: #0054FF;
      outline: none;
      box-shadow: 0 0 0 3px rgba(0, 84, 255, 0.1);
    }
    textarea {
      border-radius: 12px;
      background: #fafafa;
      resize: vertical;
    }
    .submit-btn,
    .next-btn,
    .prev-btn {
      margin-top: 2.5rem;
      background: #0054FF;
      color: white;
      border: none;
      padding: 1rem;
      font-size: 1rem;
      font-weight: 600;
      width: 100%;
      border-radius: 10px;
      cursor: pointer;
      transition: background 0.2s;
    }
    .submit-btn:hover,
    .next-btn:hover,
    .prev-btn:hover {
      background: #003fc9;
    }
    .upload-section {
      margin-top: 2rem;
      padding: 2rem;
      border: 2px dashed #d0d7de;
      border-radius: 12px;
      background: #fefefe;
      text-align: center;
    }
    .upload-section input[type="file"] {
      display: block;
      margin: 1rem auto 0;
    }
    .note {
      font-size: 0.9rem;
      color: #666;
      margin-top: 0.5rem;
      font-weight: 500;
    }
    .note strong {
      color: #d00;
    }
    .hidden {
      display: none;
    }
    .flex-row {
      display: flex;
      gap: 1rem;
      margin-bottom: 0.5rem;
    }
    .flex-row input {
      flex: 1;
      font-weight: 500;
    }
    .rating-stars {
      display: flex;
      flex-direction: row;
      justify-content: flex-start;
      gap: 0.25rem;
      margin: 0.5rem 0 1rem;
    }
    .rating-stars input {
      display: none;
    }
    .rating-stars label {
      font-size: 1.8rem;
      color: #d0d7de;
      cursor: pointer;
      transition: color 0.2s;
    }
    .rating-stars input:checked ~ label,
    .rating-stars label:hover,
    .rating-stars label:hover ~ label {
      color: #FFBC00;
    }
    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      20%, 60% { transform: translateX(-8px); }
      40%, 80% { transform: translateX(8px); }
    }
    .shake {
      animation: shake 0.4s ease;
    }
    @media (max-width: 600px) {
      body {
        padding: 1.5rem 0.5rem;
      }
      .container {
        padding: 1.5rem 1rem;
      }
      h1 {
        font-size: 1.4rem;
      }
      label {
        font-size: 0.95rem;
      }
      input,
      select,
      textarea {
        font-size: 0.95rem;
        padding: 0.7rem;
      }
      .submit-btn,
      .next-btn,
      .prev-btn {
        font-size: 0.95rem;
        padding: 0.9rem;
      }
      .step-indicator {
        font-size: 0.9rem;
      }
    }
  </style>
</head>

<body>

  <div id="google_translate_element" style="text-align: right; margin-bottom: 1rem;"></div>
  <script type="text/javascript">
    function googleTranslateElementInit() {
      new google.translate.TranslateElement({
        pageLanguage: 'ko',
        includedLanguages: 'ko,en,zh-CN,ja,vi,th,id,fr,es',
        layout: google.translate.TranslateElement.InlineLayout.HORIZONTAL
      }, 'google_translate_element');
    }
  </script>
  <script type="text/javascript" src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

    <div class="container" id="page1">
      <h1>근무 후기 이벤트 참여</h1>
      <div class="progress-wrapper"><div class="progress-bar" id="progressBar"></div></div>
      <div class="step-indicator">1 / 3</div>
      <form onsubmit="event.preventDefault(); showPage(2);">
        <label>이름</label>
        <input type="text" name="name" required>
        <label>이메일</label>
        <input type="email" name="email" required>
        <label>전화번호</label>
        <input type="tel" name="phone" required>
        <label>어떤 경로로 후기 이벤트를 접하게 되었나요?</label>
        <select name="source" required>
          <option value="">선택해주세요</option>
          <option>디맨드 홈페이지</option>
          <option>디맨드 인스타그램</option>
          <option>디맨드 스레드</option>
          <option>디맨드 오픈채팅방</option>
          <option>인스타그램 광고</option>
          <option>디맨드 블로그</option>
          <option>기타</option>
        </select>
        <label>최종학력</label>
        <select name="education" required>
          <option value="">선택해주세요</option>
          <option>고졸</option>
          <option>초대졸</option>
          <option>대졸</option>
        </select>
        <label>회사명</label>
        <input type="text" name="company" required>
        <label>사업장 주소</label>
        <div class="flex-row">
          <input type="text" id="postcode" placeholder="우편번호" readonly required>
          <button type="button" onclick="execDaumPostcode()">주소 찾기</button>
        </div>
        <input type="text" id="roadAddress" placeholder="도로명 주소" readonly required>
        <input type="text" id="detailAddress" placeholder="상세주소 입력" required>
        <label>근무 형태</label>
        <select name="worktype" required>
          <option value="현직장">현직장</option>
          <option value="전직장">전직장</option>
        </select>
        <label>직무</label>
        <select name="jobtype" required>
          <option>생산</option>
          <option>공무</option>
          <option>설비</option>
          <option>환경안전</option>
          <option>물류</option>
          <option>품질</option>
          <option>건설/공사/프로젝트</option>
          <option>설계/CAD/CAM</option>
          <option>시설관리</option>
          <option>기타</option>
        </select>
        <label><input type="checkbox" required> 개인정보 수집 및 활용에 동의합니다.</label>
        <button type="submit" class="next-btn">다음 (1/3)</button>
      </form>
    </div>
  
    <div class="container hidden" id="page2">
      <h1>현직자 인증</h1>
      <div class="progress-wrapper"><div class="progress-bar" id="progressBar"></div></div>
      <div class="step-indicator">2 / 3</div>
      <p>증빙자료를 업로드해주세요. (예: 사원증, 사내 시스템 화면 등 / 이미지 또는 PDF 파일, 15일 이내 자동 삭제됩니다)</p>
      <form onsubmit="event.preventDefault(); showPage(3);">
        <div class="upload-section">
          <input type="file" name="proof" accept="image/*,application/pdf" required>
        </div>
        <button type="button" class="prev-btn" onclick="showPage(1)">이전</button>
        <button type="submit" class="next-btn">다음 (2/3)</button>
      </form>
    </div>
  
    <div class="container hidden" id="page3">
      <h1>현직자 상세 리뷰</h1>
      <div class="progress-wrapper"><div class="progress-bar" id="progressBar"></div></div>
      <div class="step-indicator">3 / 3</div>
      <form onsubmit="event.preventDefault(); alert('제출 완료!');">
        <div id="reviewItems"></div>
        <button type="button" class="prev-btn" onclick="showPage(2)">이전</button>
        <button type="submit" class="submit-btn">제출하기</button>
      </form>
    </div>
  
    <script src="https://t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
<script>
  function showPage(n) {
    document.querySelectorAll('.container').forEach((c, i) => c.classList.toggle('hidden', i !== n - 1));
    
    // 모든 progress-bar 업데이트
    const bars = document.querySelectorAll(".progress-bar");
    bars.forEach(bar => {
      bar.style.width = (n / 3 * 100) + "%";
    });

    window.scrollTo({ top: 0, behavior: "smooth" });
  }

  function execDaumPostcode() {
    new daum.Postcode({
      oncomplete: function(data) {
        document.getElementById('postcode').value = data.zonecode;
        document.getElementById('roadAddress').value = data.roadAddress;
        setTimeout(() => document.getElementById('detailAddress').focus(), 100);
      }
    }).open();
  }

  // 입력 오류 시 흔들림 효과
  document.querySelectorAll("form").forEach(form => {
    form.addEventListener("submit", (e) => {
      const invalid = form.querySelector(":invalid");
      if (invalid) {
        e.preventDefault();
        const container = form.closest(".container");
        container.classList.remove("shake");
        void container.offsetWidth; // Reflow
        container.classList.add("shake");
      }
    });
  });

  // 후기 항목 동적 생성
  const reviewData = [
    { title: "근무환경/시설" },
    { title: "근무강도/스트레스" },
    { title: "급여/복지" },
    { title: "안정성/전망" },
    { title: "사람들" },
    { title: "취업준비", isDifficulty: true },
    { title: "면접준비", isDifficulty: true },
    { title: "이 곳에서 일하게 될 사람들에게 한마디" }
  ];

  const container = document.getElementById("reviewItems");
  reviewData.forEach((item, idx) => {
    const section = document.createElement("div");
    let content = <label>${idx + 1}. ${item.title}</label>;

    if (item.isDifficulty) {
      content += 
        <label>난이도 평가</label>
        <select required>
          <option value="">선택</option>
          <option value="1">1 (쉬움)</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4 (어려움)</option>
        </select>
      ;
    } else if (item.title.includes("한마디")) {
      // 주관식 항목
    } else {
      content += 
        <div class="rating-stars">
          <input type="radio" id="${item.title}-star5" name="${item.title}" value="5" required>
          <label for="${item.title}-star5">★</label>
          <input type="radio" id="${item.title}-star4" name="${item.title}" value="4">
          <label for="${item.title}-star4">★</label>
          <input type="radio" id="${item.title}-star3" name="${item.title}" value="3">
          <label for="${item.title}-star3">★</label>
          <input type="radio" id="${item.title}-star2" name="${item.title}" value="2">
          <label for="${item.title}-star2">★</label>
          <input type="radio" id="${item.title}-star1" name="${item.title}" value="1">
          <label for="${item.title}-star1">★</label>
        </div>
      ;
    }

    content += 
      <label>상세 리뷰 *</label>
      <textarea rows="4" minlength="50" required placeholder="최소 50자 이상 입력"></textarea>
    ;

    section.innerHTML = content;
    container.appendChild(section);
  });
</script>